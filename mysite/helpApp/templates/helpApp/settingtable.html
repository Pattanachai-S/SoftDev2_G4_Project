{% extends 'generalApp/components/base.html' %}

{% block title %}ตั้งค่าตารางเรียน | {% endblock %}

{% block content %}

<div class="header-section">
    <h1>Edit Study Timetable</h1>
</div>

<div class="content-section">
    <div class="content-container">
        <form method="get">
            <input type="search" size="65" name='search-subject' placeholder="Search">
            <button type="submit">Search</button>
            <br>
        </form>
    
        <br>

        {% for subject in subject %}
        <div class="cardd">
            <div class="container-about">
                <br>
                <a class="button-link" >{{ subject.subject_ID}} {{ subject.name }}</a>
                <br>
                <br>
                <select name="section">
                    {% for section in subject.section_set.all %}
                    <option value="{{ section.sec_num }}">{{ section.sec_num }} {{ section.day }} {{ section.time }}</option>
                    {% endfor %}
                </select>
                <br>
                <br>
                <form action="{% url 'add_subject' %}" method="POST">
                    {% csrf_token %}
                    <button id="add-btn-{{ subject.pk }}" type="submit" class="button" onclick="changeButton(this)">Add</button>
                    <input type="hidden" name="subject_id" value="{{ subject.subject_ID }}">
                    
                </form>
                    
                    <button id="delete-btn-{{ subject.pk }}" type="submit" class="button-delete" style="display: none;" onclick="changeButton(this)">Delete</button>
                    
                
            </div>
        </div>
        <br>
        {% endfor %}
    </div>
</div>

<script>
    function changeButton(button) {
        var subjectId = button.id.split('-')[2];
        var addButton = document.getElementById('add-btn-' + subjectId);
        var deleteButton = document.getElementById('delete-btn-' + subjectId);
        if (button.id === addButton.id) {
            addButton.style.display = 'none';
            deleteButton.style.display = 'block';
        } else {
            deleteButton.style.display = 'none';
            addButton.style.display = 'block';
        }


    }
</script>

{% endblock %}